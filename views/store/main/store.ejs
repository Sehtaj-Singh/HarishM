<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>HRstore</title>

    <link rel="stylesheet" href="css/store.css" />
    <link rel="stylesheet" href="css/storeHeader.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alegreya+SC:wght@400;700&display=swap"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Overlock+SC&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Alice&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Arsenal:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <script
      src="https://kit.fontawesome.com/3a523928fc.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script src="javascript/store.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".star-wrapper").forEach(function (wrapper) {
          const rating = parseFloat(wrapper.dataset.rating) || 0;
          const pct = (rating / 5) * 100; // e.g. 4.2 -> 84
          const filled = wrapper.querySelector(".stars-filled");
          if (filled) filled.style.width = pct + "%";
        });
      });
    </script>

    <%- include(`../../partials/storeHeader`) %>

     <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alegreya+SC:wght@400;700&display=swap"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Overlock+SC&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Alice&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Arsenal:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    

    <div id="store-wrapper">
      <div id="slider">
        <!-- ðŸ”¹ New Mobiles Section -->
        <section class="store-section" id="new-mobile-section">
          <div class="image-new">
            <i
              class="fa-solid fa-chevron-left nav-icon left-icon"
              data-dir="left"
            ></i>
            
            <i
              class="fa-solid fa-chevron-right nav-icon right-icon"
              data-dir="right"
            ></i>
          </div>

         
          <div class="card-Section">
             <% registeredNmobile.forEach(function(Nmobile) { %>
               <% 
                 const _s = v => (v == null ? '' : String(v).trim());
                 const base = _s(Nmobile.Nname);
                 const net = _s(Nmobile.specs?.connectivity?.network).toUpperCase();
                 const ramV = _s(Nmobile.specs?.memory?.ram);
                 const stoV = _s(Nmobile.specs?.memory?.storage);
                 const colV = _s(Nmobile.specs?.design?.color).toLowerCase();
                 const addGB = v => v ? (/\d/.test(v) && !/gb/i.test(v) ? `${v}GB` : v) : '';
                 const ram = addGB(ramV);
                 const storage = addGB(stoV);
                 const parts = []; if (ram) parts.push(ram); if (storage) parts.push(storage);
                 let parenText = parts.join('/'); if (colV) parenText = parenText ? `${parenText}, ${colV}` : colV;
                 const displayName = [base, net].filter(Boolean).join(' ') + (parenText ? ` (${parenText})` : '');
               %>


                <a class="Mobile-Card"  href="/New/Details/<%= Nmobile._id %>">
                  <div class="card-Image">
                    <img id="cardImg"
                    src="/uploads/<%= Nmobile.Nimage %>"
                    alt="<%= Nmobile.Nname %>"
                  />

                  </div>

                  <div class="card-data">
                    <h3 id="card-name"><%= displayName %></h3>
                    <p class="mobileRating">
                     <span class="star-wrapper" data-rating="<%= Nmobile.Nrating || 0 %>">
                     <span class="stars-empty">
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                     </span>
                     <span class="stars-filled">
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                       <i class="fas fa-star"></i>
                     </span>
                     </span>
                      <span class="rating-number"><%= Nmobile.Nrating ? Nmobile.Nrating.toFixed(1) : '0.0' %></span>
                     </p>
                     <div class="finalPrice">â‚¹<%= Nmobile.Nprice %></div>
                     <div id="card-discout">
                       <div class="mobileMRP">â‚¹<%= Nmobile.Nmrp %></div>
                       <div class="mobileDiscount">-<%= Nmobile.Ndiscount %>%    </div>
                     </div>

                     <div class="card-delivery">Free delivery , Sat 27 Sept </div>
                     <button class="add-cart">Add To Cart</button>


                  </div>
                </a>


          
              <% }) %>
           </div>

          
        </section>
        
        <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">


        <!-- ðŸ”¹ Refurbished Mobiles Section -->
        <section class="store-section" id="refurbished-section">
          
          <!-- <p id="below-head">Refurbhished</p> -->
          <div class="image-refurb">
            <i
              class="fa-solid fa-chevron-left nav-icon left-icon"
              data-dir="left"
            ></i>
            
           
            <i
              class="fa-solid fa-chevron-right nav-icon right-icon"
              data-dir="right"
            ></i>
          </div>


          <div class="card-Section">
             <% registeredSHmobile.forEach(function(SHmobile) { %>
               <% 
                 const _s = v => (v == null ? '' : String(v).trim());
                 const base = _s(SHmobile.SHname);
                 const net = _s(SHmobile.specs?.connectivity?.network).toUpperCase();
                 const ramV = _s(SHmobile.specs?.memory?.ram);
                 const stoV = _s(SHmobile.specs?.memory?.storage);
                 const colV = _s(SHmobile.specs?.design?.color).toLowerCase();
                 const addGB = v => v ? (/\d/.test(v) && !/gb/i.test(v) ? `${v}GB` : v) : '';
                 const ram = addGB(ramV);
                 const storage = addGB(stoV);
                 const parts = []; if (ram) parts.push(ram); if (storage) parts.push(storage);
                 let parenText = parts.join('/'); if (colV) parenText = parenText ? `${parenText}, ${colV}` : colV;
                 const displayName = [base, net].filter(Boolean).join(' ') + (parenText ? ` (${parenText})` : '');
               %>


                <a class="Mobile-Card"  href="/Second-Hand/Details/<%= SHmobile._id %>">
                  <div class="card-Image">
                    <img id="cardImg"
                    src="/uploads/<%= SHmobile.SHimage %>"
                    alt="<%= SHmobile.SHname %>"
                  />

                  </div>

                  <div class="card-data">
                    <h3 id="card-name"><%= displayName %></h3>
                     <p class="mobilecCondition">Condition: <%= SHmobile.condition %></p>
                     <div class="finalPrice">â‚¹<%= SHmobile.SHprice %></div>
                     <div id="card-discout">
                       <div class="mobileMRP">â‚¹<%= SHmobile.SHmrp %></div>
                       <div class="mobileDiscount">-<%= SHmobile.SHdiscount %>%    </div>
                     </div>

                     <div class="card-delivery">Free delivery , Sat 27 Sept </div>
                     <button class="add-cart">Add To Cart</button>


                  </div>
                </a>


          
              <% }) %>
        </div>

         
        </section>

        <!-- ðŸ”¹ Accessories Section -->
        <section class="store-section" id="accessory-section">
          <div class="image-accessory">
            <i
              class="fa-solid fa-chevron-left nav-icon left-icon"
              data-dir="left"
            ></i>
           
            <i
              class="fa-solid fa-chevron-right nav-icon right-icon"
              data-dir="right"
            ></i>
          </div>

           <div class="card-Section">
             <% registeredAmobile.forEach(function(accessory) { %>
               <% 
                 const _s = v => (v == null ? '' : String(v).trim());
                 const base = _s(accessory.Aname);
                 const net = _s(accessory.specs?.connectivity?.network).toUpperCase();
                 const ramV = _s(accessory.specs?.memory?.ram);
                 const stoV = _s(accessory.specs?.memory?.storage);
                 const colV = _s(accessory.specs?.design?.color).toLowerCase();
                 const addGB = v => v ? (/\d/.test(v) && !/gb/i.test(v) ? `${v}GB` : v) : '';
                 const ram = addGB(ramV);
                 const storage = addGB(stoV);
                 const parts = []; if (ram) parts.push(ram); if (storage) parts.push(storage);
                 let parenText = parts.join('/'); if (colV) parenText = parenText ? `${parenText}, ${colV}` : colV;
                 const displayName = [base, net].filter(Boolean).join(' ') + (parenText ? ` (${parenText})` : '');
               %>


                <a class="Mobile-Card"  href="/Accessory/Details/<%= accessory._id %>">
                  <div class="card-Image">
                    <img id="cardImg"
                    src="/uploads/<%= accessory.Aimage %>"
                    alt="<%= accessory.Aname %>"
                  />

                  </div>

                  <div class="card-data">
                    <h3 id="card-name"><%= displayName %></h3>
                     <p class="mobileRating">
                       <span class="star-wrapper" data-rating="<%= accessory.Arating || 0 %>">
                       <span class="stars-empty">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                      </span>
                      <span class="stars-filled">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                       </span>
                      </span>
                       <span class="rating-number"><%= accessory.Arating ? accessory.Arating.toFixed(1) : '0.0' %></span>
                     </p>
                     <div class="finalPrice">â‚¹<%= accessory.Aprice %></div>
                     <div id="card-discout">
                       <div class="mobileMRP">â‚¹<%= accessory.Amrp %></div>
                       <div class="mobileDiscount">-<%= accessory.Adiscount %>%    </div>
                     </div>

                     <div class="card-delivery">Free delivery , Sat 27 Sept </div>
                     <button class="add-cart">Add To Cart</button>


                  </div>
                </a>


          
              <% }) %>
           </div>
        </section>
      </div>
    </div>

    <%- include('../../partials/storeFooter') %>
  </body>
</html>
