<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HRcontact</title>
    <link rel="stylesheet" href="css/storeHeader.css" />
    <link rel="stylesheet" href="css/contact.css" />
    <script
      src="https://kit.fontawesome.com/3a523928fc.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script src="javascript/store.js"></script>
    <%- include(`../../partials/storeHeader`) %> 
    <%- include(`../../partials/fonts`) %>

    <a class="main">
      <a class="contact-box">
        <div>
          <i class="fas fa-phone"></i>
          <h3>Phone</h3>
        </div>
        <p>8572002626</p></a
      >
      <A class="contact-box2"
        ><div>
          <i class="fas fa-envelope"></i>
           <h3>Email</h3>
        </div>
        <p>harishmobile49@gmail.com</p>
        </A
      >
      <a class="contact-box3">
        <div>
          <i class="fab fa-whatsapp"></i>
          <h3>WhatsApp</h3>
        </div>
        <p>8572002626</p>
      </a>

      <img id="pic" src="images/location.png" />
      <div class="location">
        <h3>Address:</h3>
        <br />
        <p>Sant Nagar, Sirsa, Haryana, 125075</p>
      </div>
    </a>

   <div class="contact-form">
  <h2>Message us</h2>
  <div class="message">
    <img src="/images/contact.jpg">
    <div class="form">
      <form id="contactForm" action="/contact" method="POST">
        <input name="name" placeholder="Name" required>
        <input name="email" type="email" placeholder="Email" required>
        <input name="phone" placeholder="Phone Number">
        <textarea name="message" placeholder="Message" required></textarea>
        <input type="submit" value="Send Message">
      </form>
      <!-- Toast -->
      <div id="toast" class="toast"></div>

    </div>
  </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById('contactForm');
  const toast = document.getElementById('toast');
  if (!form) return;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    console.log("Form submit fired"); // check console

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    try {
      const res = await fetch('/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      const result = await res.json();
      if (result.success) {
        showToast('Submitted successfully!', 'success');
        form.reset();
      } else {
        showToast('Something went wrong. Try again.', 'error');
      }
    } catch (err) {
      console.error(err);
      showToast('Error submitting form.', 'error');
    }
  });

  function showToast(message, type) {
    toast.textContent = message;
    toast.className = `toast show ${type}`;
    setTimeout(() => {
      toast.className = 'toast';
    }, 3000);
  }
});
</script>


    <%- include('../../partials/storeFooter') %>
  </body>
</html>
