<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>harishMobile</title>
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="css/storeHeader.css" />
    <script
      src="https://kit.fontawesome.com/3a523928fc.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script src="javascript/store.js"></script>
    <%- include(`../../partials/storeHeader`) %>
    <div id="upwrapIS">
      <section id="imageSlider">
        <div class="carousel" id="carousel">
          <div class="carousel-track">
            <img id="slide" src="/images/is1.jpg" alt="Image 1" />
            <img id="slide" src="/images/is2.png" alt="Image 2" />
            <img id="slide" src="/images/is3.png" alt="Image 3" />
            <img id="slide" src="/images/is4.jpg" alt="Image 4" />
          </div>
          <div class="carousel-dots" id="dots"></div>
        </div>
      </section>
    </div>

    <!-- Google Fonts:  -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alegreya+SC:wght@400;700&display=swap"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Overlock+SC&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/css2?family=Alice&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">



    <section class="category" aria-labelledby="cat-title">
      <header class="category-head">
        <h2 id="cat-title" class="cat-title">Categories</h2>
      </header>

      <div class="cat2">
        <a href="/store?tab=second" class="box-refurb">
          <h3>Refurbished</h3>
          <h3>Mobile</h3>
        </a>

        <a href="/store?tab=new" class="box-new">
          <h3>New</h3>
          <h3>Mobile</h3>
        </a>
      </div>

      <a href="/store?tab=accessories" class="box-accessories">
        <h3>Accessories</h3>
        <span id="cat-shop"> Shop Now </span>
      </a>
    </section>

    <section class="top-selling">
      <h2 class="top-title">Top Selling</h2>

      <% const selectedIds = (typeof topSellingIds !== 'undefined' &&
      Array.isArray(topSellingIds)) ? topSellingIds.map(String) : []; const
      mapSH = (m) => ({ id: String(m._id), image: m.SHimage, name: m.SHname,
      price: m.SHprice, mrp: m.SHmrp, href: '/Second-Hand/Details/' + m._id,
      tag: 'Refurbished' }); const mapN = (m) => ({ id: String(m._id), image:
      m.Nimage, name: m.Nname, price: m.Nprice, mrp: m.Nmrp, href:
      '/New/Details/' + m._id, tag: 'New' }); const mapA = (m) => ({ id:
      String(m._id), image: m.Aimage, name: m.Aname, price: m.Aprice, mrp:
      m.Amrp, href: '/Accessory/Details/' + m._id, tag: '' }); const combined =
      [] .concat( (registeredSHmobile || []).map(mapSH), (registeredNmobile ||
      []).map(mapN), (registeredAmobile || []).map(mapA) ) .filter(x => x &&
      selectedIds.includes(x.id)); const topSelling = combined.slice(0, 8); %>

      <div class="top-selling-grid">
        <% if (topSelling && topSelling.length) { %> <%
        topSelling.forEach(function(item) { %>
        <a href="<%= item.href %>" class="product-card">
          <!-- Image Section -->
          <div class="product-thumb">
            <% if (item.tag) { %>
             <span class="product-tag <%= item.tag.toLowerCase() %>"><%= item.tag %></span>
            <% } %>
            <img
              src="/uploads/<%= item.image %>"
              alt="<%= item.name %>"
              class="topSellingImg"
              loading="lazy"
            />
          </div>

          <!-- Details Section -->
          <div class="product-info">
            <h4 class="product-title"><%= item.name %></h4>
            <div class="product-pricing">
               <span class="product-price <%= item.tag.toLowerCase() %>">₹<%= item.price.toLocaleString("en-IN") %></span>
              <% if (item.mrp) { %>
              <span class="product-mrp">₹<%= item.mrp.toLocaleString("en-IN") %></span>
              <% } %>
            </div>
          </div>
        </a>
        <% }) %> <% } else { %>
        <p>No top selling items available right now.</p>
        <% } %>
      </div>
    </section>

    <div id="CardWrapperSH">
      <div class="sectionHeadingSHA">
        <h3 id="cardHeadingSHA">Second-Hand Mobiles</h3>
        <a class="viewAllLinkSHA" href="/store?tab=second">
          <span>View All</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>
      <div class="CardSectionSHA">
        <% registeredSHmobile.forEach(function(SHmobile) { %>
        <div class="MobileCardSHA">
          <a
            class="detailsOverlay"
            href="/Second-Hand/Details/<%= SHmobile._id  %>?from=home"
            >details</a
          >

          <img class="cardLogoSHA" src="/images/cardLogo1.png" />
          <span class="statusBadgeSHA">Used</span>

          <img
            class="mobileImage"
            src="/uploads/<%= SHmobile.SHimage %>"
            alt="mobile image"
          />

          <h3 class="mobilenNameSHA"><%= SHmobile.SHname %></h3>
          <p class="mobilecConditionSHA">
            Condition: <%= SHmobile.condition %>
          </p>
          <div class="mobileDiscountSHA"><%= SHmobile.SHdiscount %>% OFF</div>
          <div class="MRPflex">
            <div class="cardMRPSHA">MRP</div>
            <div class="mobileMRPSHA">₹<%= SHmobile.SHmrp %></div>
          </div>
          <div class="pricBuyRow">
            <div class="finalPriceWrap">
              <div class="finalPriceSHA">₹<%= SHmobile.SHprice %></div>
              <div class="cornerRibbonLeftSHA"></div>
            </div>
            <button class="buyButtonSHA">
              <i class="fas fa-shopping-bag"></i> Buy
            </button>
          </div>
        </div>
        <% }) %>
      </div>
    </div>
    <img id="test" src="/images/test5.png" />

    <div id="CardWrapperN">
      <div class="sectionHeadingN">
        <h3 id="cardHeadingN">Brand New Mobiles</h3>
        <a class="viewAllLinkN" href="/store?tab=new">
          <span>View All</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>

      <div class="CardSectionN">
        <% registeredNmobile.forEach(function(Nmobile) { %>
        <div class="MobileCardN">
          <a
            class="detailsOverlay"
            href="/New/Details/<%= Nmobile._id  %>?from=home"
            >details</a
          >

          <img class="cardLogoN" src="/images/cardLogo2.png" />
          <span class="statusBadgeN">New</span>

          <img
            class="mobileImage"
            src="/uploads/<%= Nmobile.Nimage %>"
            alt="mobile image"
          />

          <h3 class="mobilenNameN"><%= Nmobile.Nname %></h3>
          <div class="mobileDiscountN"><%= Nmobile.Ndiscount %>% OFF</div>
          <div class="MRPflex">
            <div class="cardMRPN">MRP</div>
            <div class="mobileMRPN">₹<%= Nmobile.Nmrp %></div>
          </div>
          <div class="pricBuyRow">
            <div class="finalPriceWrap">
              <div class="finalPriceN">₹<%= Nmobile.Nprice %></div>
              <div class="cornerRibbonLeftN"></div>
            </div>
            <button class="buyButtonN">
              <i class="fas fa-shopping-bag"></i> Buy
            </button>
          </div>
        </div>
        <% }) %>
      </div>
    </div>

    <div id="CardWrapperA">
      <div class="sectionHeadingSHA">
        <h3 id="cardHeadingSHA">Accessories</h3>
        <a class="viewAllLinkSHA" href="/store?tab=accessories">
          <span>View All</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>

      <div class="CardSectionSHA">
        <% registeredAmobile.forEach(function(accessory) { %>
        <div class="MobileCardSHA">
          <a
            class="detailsOverlay"
            href="/Accessory/Details/<%= accessory._id  %>?from=home"
            >details</a
          >

          <img class="cardLogoSHA" src="/images/cardLogo1.png" />
          <span class="statusBadgeSHA">New</span>

          <img
            class="mobileImage"
            src="/uploads/<%= accessory.Aimage %>"
            alt="mobile image"
          />

          <h3 class="mobilenNameA"><%= accessory.Aname %></h3>
          <div class="mobileDiscountA"><%=accessory.Adiscount %>% OFF</div>
          <div class="MRPflex">
            <div class="cardMRPSHA">MRP</div>
            <div class="mobileMRPSHA">₹<%= accessory.Amrp %></div>
          </div>
          <div class="pricBuyRow">
            <div class="finalPriceWrap">
              <div class="finalPriceSHA">₹<%= accessory.Aprice %></div>
              <div class="cornerRibbonLeftSHA"></div>
            </div>
            <button class="buyButtonSHA">
              <i class="fas fa-shopping-bag"></i> Buy
            </button>
          </div>
        </div>
        <% }) %>
      </div>
    </div>

    <!-- </div>
    <img id="bis" src="/images/test5.png" alt="test"> -->
  </body>
</html>
